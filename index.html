<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±èªå­¦ç¿’ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä¸Šéƒ¨ã«é…ç½® */
            min-height: 100vh; /* ç”»é¢ã®é«˜ã•ã„ã£ã±ã„ã«è¡¨ç¤º */
            height: 100%; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼å¯¾ç­– */
            background: #000; /* ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯èƒŒæ™¯è‰² */
            color: white;
            overflow-x: hidden; /* æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’é˜²æ­¢ */
            position: relative; /* èƒŒæ™¯è¦ç´ ã®åŸºæº–ç‚¹ */
            box-sizing: border-box; /* paddingã‚’å«ã‚ã¦è¨ˆç®— */
        }

        /* éŠ€æ²³èƒŒæ™¯ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        body:before {
            content: "";
            position: fixed; /* èƒŒæ™¯ã‚’å›ºå®š */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(125deg, #090e29, #020024, #1e0a3d, #09244c);
            background-size: 400% 400%; /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã«æ‹¡å¤§ */
            z-index: -2; /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä¸‹ã«é…ç½® */
            animation: galaxyMove 20s ease infinite; /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        }

        /* æ˜Ÿã®ãã‚‰ã‚ãåŠ¹æœ */
        .stars {
            position: fixed; /* æ˜Ÿã‚’å›ºå®š */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç„¡åŠ¹åŒ– */
            z-index: -1; /* èƒŒæ™¯ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®é–“ã«é…ç½® */
        }

        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’CSSå¤‰æ•°ã§è¨­å®š */
            animation: twinkle var(--duration) ease-in-out infinite;
            opacity: var(--opacity); /* åˆæœŸé€æ˜åº¦ */
        }

        @keyframes galaxyMove {
            0% { background-position: 0% 50% }
            50% { background-position: 100% 50% }
            100% { background-position: 0% 50% }
        }

        /* ä¿®æ­£: ã‚ˆã‚Šå®‰å®šã—ãŸæ˜Ÿã®ç¬ãã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes twinkle {
            0%, 100% {
                /* é–‹å§‹/çµ‚äº†æ™‚ã¯åŸºæœ¬ã®é€æ˜åº¦ */
                opacity: var(--opacity);
                transform: scale(1);
            }
            20% {
                /* å°‘ã—æš—ãã€å°ã•ã (å…ƒã®60%) */
                opacity: calc(var(--opacity) * 0.6);
                transform: scale(0.9);
            }
            50% {
                /* ã‚„ã‚„æ˜ã‚‹ãã€å¤§ãã (å…ƒã®95%) */
                 opacity: calc(var(--opacity) * 0.95);
                 transform: scale(1.05);
            }
             80% {
                 /* å†ã³æš—ã (å…ƒã®50%) */
                 opacity: calc(var(--opacity) * 0.5);
                 transform: scale(0.95);
             }
        }


        h1 {
            font-weight: 600;
            margin: 10px 0 5px; /* ä¸Šä¸‹ã®ãƒãƒ¼ã‚¸ãƒ³èª¿æ•´ */
            color: #ffffff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7), 0 0 20px rgba(255, 255, 255, 0.5);
            font-size: 2.2rem;
            letter-spacing: 1px;
            display: flex; /* çµµæ–‡å­—ã®å‚ç›´ä¸­å¤®æƒãˆã®ãŸã‚ */
            align-items: center; /* çµµæ–‡å­—ã®å‚ç›´ä¸­å¤®æƒãˆã®ãŸã‚ */
            justify-content: center; /* å…¨ä½“ã‚’ä¸­å¤®æƒãˆ */
        }
        /* çµµæ–‡å­—ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ */
        h1 span {
             vertical-align: middle; /* å‚ç›´ä½ç½®ã®å¾®èª¿æ•´ */
             display: inline-block;
        }


        /* ã‚«ãƒ†ã‚´ãƒªé¸æŠã‚°ãƒªãƒƒãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .category-grid {
             display: grid;
             grid-template-columns: repeat(3, max-content); /* â˜… åˆ—å¹…ã‚’å†…å®¹ã«åˆã‚ã›ã‚‹ */
             justify-content: center; /* â˜… ã‚°ãƒªãƒƒãƒ‰ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä¸­å¤®æƒãˆ */
             grid-gap: 15px;
             margin: 15px auto 20px auto; /* ä¸Šä¸‹ãƒãƒ¼ã‚¸ãƒ³èª¿æ•´ */
        }

        /* ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ¼ãƒ‰ã®å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
        .category-card {
            background: linear-gradient(135deg, rgba(36, 123, 205, 0.3), rgba(16, 54, 140, 0.2));
            padding: 20px 10px; /* â˜… ä¸Šä¸‹ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¢—åŠ  */
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒœãƒ¼ãƒ€ãƒ¼ */
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* â˜… ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ¼ãƒ‰å†…ã® h3 (ãƒ©ãƒ³ã‚¯è¡¨ç¤º) ã‚¹ã‚¿ã‚¤ãƒ« */
        .category-card h3 {
            margin: 0; /* ãƒãƒ¼ã‚¸ãƒ³ãƒªã‚»ãƒƒãƒˆ */
            font-size: 0.9rem; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º */
            color: white;
            font-weight: 500;
            line-height: 1.2; /* è¡Œé–“ */
        }

        /* â˜… æº–å‚™ä¸­ãƒ†ã‚­ã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .status-preparing {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 4px;
            margin-bottom: 0; /* ä¸‹ãƒãƒ¼ã‚¸ãƒ³å‰Šé™¤ */
        }

        /* â˜… ç„¡åŠ¹ãªã‚«ãƒ†ã‚´ãƒªã‚«ãƒ¼ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .category-disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        /* ç„¡åŠ¹ãªã‚«ãƒ¼ãƒ‰ãƒ›ãƒãƒ¼æ™‚ã®åŠ¹æœã‚’æŠ‘åˆ¶ */
        .category-disabled:hover {
             border: 1px solid rgba(255, 255, 255, 0.1);
             box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }


        /* é¸æŠä¸­ã®ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ¼ãƒ‰ */
        .category-card.active {
             border: 2px solid rgba(52, 152, 219, 0.6); /* å¼·èª¿ãƒœãƒ¼ãƒ€ãƒ¼ */
             box-shadow: 0 0 10px rgba(52, 152, 219, 0.3); /* è»½ã„å…‰å½© */
        }
        /* â˜… ç„¡åŠ¹ãªã‚«ãƒ¼ãƒ‰ãŒé¸æŠã•ã‚Œã¦ã‚‚è¦‹ãŸç›®ã¯é€šå¸¸é€šã‚Š */
        .category-disabled.active {
             border: 1px solid rgba(255, 255, 255, 0.1);
             box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
             /* å¿…è¦ã§ã‚ã‚Œã°ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã ãŒç„¡åŠ¹ãªå ´åˆã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¿½åŠ  */
        }


        .card-container {
            width: 90%; /* å¹…ã‚’ç”»é¢æ¯”ç‡ã§è¨­å®š */
            max-width: 400px; /* æœ€å¤§å¹…ã‚’è¨­å®š */
            aspect-ratio: 1000 / 618; /* â˜… é»„é‡‘æ¯” (æ¨ªé•·) ã«æˆ»ã™ */
            perspective: 1500px; /* 3DåŠ¹æœã®å¥¥è¡Œã */
            margin: 10px auto 20px auto; /* ä¸Šä¸‹ãƒãƒ¼ã‚¸ãƒ³èª¿æ•´ (ä¸Šã‚’è©°ã‚ã‚‹) */
            position: relative;
            z-index: 1; /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ã‚ˆã‚Šå¥¥ */
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d; /* 3Dç©ºé–“ã§å­è¦ç´ ã‚’é…ç½® */
            transition: transform 0.5s ease; /* å›è»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚ˆã‚Šç›´ç·šçš„ã«ï¼‰ */
            cursor: default; /* é€šå¸¸ã¯ã‚¯ãƒªãƒƒã‚¯ä¸å¯ */
        }

        .card.clickable {
            cursor: pointer; /* ä¸€æ™‚åœæ­¢ä¸­ã¯ã‚¯ãƒªãƒƒã‚¯å¯èƒ½ */
        }

        .card.flipped {
            transform: rotateY(180deg); /* Yè»¸ã‚’ä¸­å¿ƒã«180åº¦å›è»¢ */
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Safariç”¨è£é¢éè¡¨ç¤º */
            backface-visibility: hidden; /* è£é¢ã‚’éè¡¨ç¤º */
            padding: 20px; /* å†…å´ã®ä½™ç™½ */
            box-sizing: border-box; /* paddingã‚’å«ã‚ã¦è¨ˆç®— */
            border-radius: 16px; /* è§’ã‚’ä¸¸ã‚ã‚‹ */
            background: rgba(255, 255, 255, 0.1); /* åŠé€æ˜ã®èƒŒæ™¯ */
            backdrop-filter: blur(10px); /* èƒŒæ™¯ã‚’ã¼ã‹ã™ï¼ˆã™ã‚Šã‚¬ãƒ©ã‚¹åŠ¹æœï¼‰ */
            -webkit-backdrop-filter: blur(10px); /* Safariç”¨ */
            border: 1px solid rgba(255, 255, 255, 0.2); /* æ ç·š */
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3); /* å½± */
            overflow: hidden; /* å†…å®¹ãŒã¯ã¿å‡ºãªã„ã‚ˆã†ã« */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between; /* â˜… ä¸Šä¸‹ã«é…ç½® */
        }

        /* â˜… ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆå˜èª/æ—¥æœ¬èªå®šç¾©ï¼‰ã‚’ä¸­å¤®æƒãˆã«ã™ã‚‹ãŸã‚ã®ãƒ©ãƒƒãƒ‘ãƒ¼ */
        .main-content {
            display: flex;
            flex-direction: column; /* h2/pãŒç¸¦ã«ä¸¦ã¶ã‚ˆã†ã« */
            justify-content: center; /* å‚ç›´ä¸­å¤®æƒãˆ */
            align-items: center; /* æ°´å¹³ä¸­å¤®æƒãˆ */
            flex-grow: 1; /* åˆ©ç”¨å¯èƒ½ãªã‚¹ãƒšãƒ¼ã‚¹ã‚’åŸ‹ã‚ã‚‹ */
            width: 100%; /* å¹…ã‚’100%ã« */
        }


        .card-front {
            background: linear-gradient(135deg, rgba(36, 123, 205, 0.5), rgba(16, 54, 140, 0.3)); /* é’ç³»ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
            color: white;
        }

        .card-back {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.5), rgba(20, 90, 50, 0.3)); /* ç·‘ç³»ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
            color: white;
            transform: rotateY(180deg); /* æœ€åˆã‹ã‚‰è£è¿”ã—ã¦ãŠã */
            display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º */
        }

        /* ã‚«ãƒ¼ãƒ‰å†…ã®h2 (å˜èªè¡¨ç¤º) */
        .card h2 {
            margin: 0; /* ãƒãƒ¼ã‚¸ãƒ³ãƒªã‚»ãƒƒãƒˆ */
            font-size: 2rem; /* å˜èªã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º */
            font-weight: 600;
            letter-spacing: 1px;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
            background: linear-gradient(to right, #ffffff, #d1d1d1);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center; /* ä¸­å¤®æƒãˆ */
            max-width: 100%; /* ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ã¯ã¿å‡ºãªã„ã‚ˆã†ã« */
        }

        /* â˜… ç™ºéŸ³è¨˜å·ã®ã‚¹ã‚¿ã‚¤ãƒ« - Flexã‚¢ã‚¤ãƒ†ãƒ ã¨ã—ã¦é…ç½® */
        .pronunciation {
            width: 90%; /* ã¯ã¿å‡ºã—é˜²æ­¢ */
            text-align: center;
            font-size: 0.95rem;
            color: white;
            font-weight: 400;
            line-height: 1.4;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
            margin-top: 5px; /* â˜… ä¸Šã®è¦ç´ ã¨ã®é–“ã«å°‘ã—ãƒãƒ¼ã‚¸ãƒ³ã‚’è¿½åŠ  */
        }


        /* ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ä¸‹ã®h2 (ãƒ¡ã‚¤ãƒ³ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«) */
         body > h2#mainSubtitle {
            margin-top:0;
            text-shadow:0 0 5px rgba(255,255,255,0.5);
            font-size:1.2rem;
            font-weight:400;
            margin-bottom: 5px; /* â˜… ä¸‹ã®h3ã¨ã®é–“éš” */
            line-height:1.5;
            text-align:center;
            background: none; /* ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è§£é™¤ */
             -webkit-background-clip: unset;
             background-clip: unset;
             -webkit-text-fill-color: unset;
             color: white; /* è‰²ã‚’ç™½ã«æˆ»ã™ */
             /* min-height: 1.5em; */ /* â˜… å¤‰æ›´å‰ */
             min-height: 3em; /* â˜… 2è¡Œè¡¨ç¤ºã«å¯¾å¿œ */
        }
        /* â˜… NAWLã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ« */
        h3#nawlSubtitle {
            margin: 0 0 10px 0; /* ä¸Šä¸‹ã®ãƒãƒ¼ã‚¸ãƒ³èª¿æ•´ */
            font-size: 1.0rem; /* å°‘ã—å°ã•ã‚ã« */
            font-weight: 500;
            color: rgba(255, 255, 255, 0.8);
            text-shadow: 0 0 3px rgba(255, 255, 255, 0.4);
            text-align: center;
            line-height: 1.4; /* â˜… è¡Œé–“ã‚’è¿½åŠ  */
        }


        p { /* æ±ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
            margin: 5px 0;
            font-size: 18px;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            font-weight: 300; /* å°‘ã—ç´°ã‚ã®ãƒ•ã‚©ãƒ³ãƒˆ */
        }

        /* è£é¢ãƒ†ã‚­ã‚¹ãƒˆã®å€‹åˆ¥ã‚¹ã‚¿ã‚¤ãƒ« */
        .card-back p.definition-jp {
             max-width: 100%; /* ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ã¯ã¿å‡ºãªã„ã‚ˆã†ã« */
            text-align: center; /* ä¸­å¤®æƒãˆã¯ç¶­æŒ */
            margin: 0; /* ãƒãƒ¼ã‚¸ãƒ³ãƒªã‚»ãƒƒãƒˆ */
            font-size: 1.3rem;
            color: #FFD700;
            font-weight: 500;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }
        /* â˜… è‹±èªå®šç¾©ã®ã‚¹ã‚¿ã‚¤ãƒ« - Flexã‚¢ã‚¤ãƒ†ãƒ ã¨ã—ã¦é…ç½® */
        .card-back p.definition-en {
             width: 90%; /* ã¯ã¿å‡ºã—é˜²æ­¢ */
             text-align: center;
             margin: 0; /* ãƒãƒ¼ã‚¸ãƒ³ãƒªã‚»ãƒƒãƒˆ */
             font-size: 0.95rem;
             color: white;
             font-weight: 400;
             line-height: 1.4;
             text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
             margin-top: 5px; /* â˜… ä¸Šã®è¦ç´ ã¨ã®é–“ã«å°‘ã—ãƒãƒ¼ã‚¸ãƒ³ã‚’è¿½åŠ  */
        }


        .definition {
            /* ã‚¹ã‚¿ã‚¤ãƒ«ã¯ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§æŒ‡å®š */
        }

        .button {
            padding: 12px 24px;
            color: white;
            border: none;
            border-radius: 30px; /* ä¸¸ã¿ã‚’å¸¯ã³ãŸãƒœã‚¿ãƒ³ */
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 0.5px;
            position: relative; /* :beforeè¦ç´ ã®åŸºæº– */
            overflow: hidden; /* :beforeè¦ç´ ãŒã¯ã¿å‡ºãªã„ã‚ˆã†ã« */
            transition: all 0.3s ease; /* ãƒ›ãƒãƒ¼åŠ¹æœã®ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ */
            backdrop-filter: blur(5px); /* ãƒœã‚¿ãƒ³ã®èƒŒæ™¯ã¼ã‹ã— */
            -webkit-backdrop-filter: blur(5px);
            background: rgba(255, 255, 255, 0.15); /* åŠé€æ˜èƒŒæ™¯ */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); /* å½± */
        }

        /* ãƒœã‚¿ãƒ³ã®ãƒ›ãƒãƒ¼æ™‚ã®å…‰æ²¢ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .button:hover:before {
            left: 100%;
        }

        .start-button {
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.8), rgba(41, 128, 185, 0.8)); /* é’ç³»ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 15px; /* ã‚«ãƒ†ã‚´ãƒªã‚°ãƒªãƒƒãƒ‰ã¨ã®ãƒãƒ¼ã‚¸ãƒ³ */
        }

        .start-button:hover {
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.9), rgba(41, 128, 185, 0.9));
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.5); /* ãƒ›ãƒãƒ¼æ™‚ã®å…‰å½©åŠ¹æœ */
            transform: translateY(-2px); /* å°‘ã—ä¸Šã«ç§»å‹• */
        }

        /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«å†…ã®ãƒœã‚¿ãƒ³å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
        .control-button {
             color: white;
             border: none;
             border-radius: 20px;
             cursor: pointer;
             transition: all 0.3s ease;
             padding: 6px 12px; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°èª¿æ•´ */
             font-size: 12px;
             text-align: center;
             min-width: 60px; /* æœ€å°å¹…è¨­å®š */
             /* â˜… ãƒœã‚¿ãƒ³ãŒå‡ç­‰ã«åºƒãŒã‚‹ã‚ˆã†ã« */
             flex-grow: 1;
             flex-basis: 0;
        }

        .prev-button { /* æˆ»ã‚‹ãƒœã‚¿ãƒ³ */
             background: linear-gradient(45deg, #6c757d, #495057); /* ã‚°ãƒ¬ãƒ¼ç³» */
        }
        .prev-button:hover {
             background: linear-gradient(45deg, #868e96, #5a6268);
             transform: translateY(-1px);
             box-shadow: 0 2px 8px rgba(108, 117, 125, 0.4);
        }

        .next-button { /* å°ã•ã„æ–¹ã®æ¬¡ã¸ãƒœã‚¿ãƒ³ */
            background: linear-gradient(45deg, rgb(39, 174, 96), rgb(27, 120, 66));
        }

        .next-button:hover {
             background: linear-gradient(45deg, rgb(46, 204, 113), rgb(39, 174, 96)); /* ãƒ›ãƒãƒ¼è‰²èª¿æ•´ */
             transform: translateY(-1px);
             box-shadow: 0 2px 8px rgba(46, 204, 113, 0.4);
        }

        .pause-button { /* å°ã•ã„æ–¹ã®åœæ­¢ãƒœã‚¿ãƒ³ */
            background: linear-gradient(45deg, rgb(211, 84, 0), rgb(170, 67, 0));
        }

        .pause-button:hover {
            background: linear-gradient(45deg, rgb(243, 156, 18), rgb(211, 84, 0)); /* ãƒ›ãƒãƒ¼è‰²èª¿æ•´ */
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(243, 156, 18, 0.4);
        }
         /* å†ç”Ÿãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
         .pause-button.resume {
             background: linear-gradient(45deg, rgb(142, 68, 173), rgb(91, 44, 111));
         }
         .pause-button.resume:hover {
             background: linear-gradient(45deg, rgb(155, 89, 182), rgb(142, 68, 173));
             box-shadow: 0 2px 8px rgba(155, 89, 182, 0.4);
         }


        .progress {
            margin-top: 20px;
            width: 100%;
            text-align: center;
        }

        .hidden {
            display: none !important; /* ç¢ºå®Ÿã«éè¡¨ç¤ºã«ã™ã‚‹ */
        }

        /* ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
        .card-counter {
            font-size: 18px;
            margin-top: 10px; /* ä¸Šï¼ˆã‚¿ã‚¤ãƒˆãƒ«ï¼‰ã¨ã®ãƒãƒ¼ã‚¸ãƒ³ */
            margin-bottom: 10px; /* ä¸‹ï¼ˆã‚«ãƒ¼ãƒ‰ï¼‰ã¨ã®ãƒãƒ¼ã‚¸ãƒ³ */
            color: rgba(255, 255, 255, 0.8);
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
            background: rgba(0, 0, 0, 0.2); /* åŠé€æ˜èƒŒæ™¯ */
            padding: 5px 15px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤ºã€JSã§è¡¨ç¤º */
            width: fit-content;
            text-align: center;
            align-self: center; /* ä¸­å¤®æƒãˆ */
            font-family: 'Roboto Mono', monospace;
        }

        /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«è¦ç´ ã®ã‚³ãƒ³ãƒ†ãƒŠ */
        .control-container {
             display: flex;
             gap: 15px;
             justify-content: center;
             flex-wrap: wrap; /* å¹…ãŒè¶³ã‚Šãªã‘ã‚Œã°æŠ˜ã‚Šè¿”ã™ */
             margin-top: 15px; /* ã‚«ãƒ¼ãƒ‰ã¨ã®é–“éš” */
             width: 100%;
             max-width: 500px; /* æœ€å¤§å¹… */
        }

        /* å„ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ï¼ˆå…±é€šï¼‰ */
        .control-panel {
            text-align: center;
            padding: 10px 15px;
            background: rgba(13, 16, 33, 0.7);
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(55, 75, 110, 0.4);
            display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤ºã€JSã§è¡¨ç¤º */
            flex-direction: column; /* ãƒ©ãƒ™ãƒ«ã¨ãƒœã‚¿ãƒ³ã‚’ç¸¦ã« */
            align-items: center; /* ä¸­å¤®æƒãˆ */
            justify-content: center; /* â˜… ãƒ©ãƒ™ãƒ«ã¨ãƒœã‚¿ãƒ³ã‚’å‚ç›´ä¸­å¤®æƒãˆ */
            flex-grow: 1;
            flex-basis: 0; /* flex-growã¨åˆã‚ã›ã¦ä½¿ã† */
            min-width: 150px; /* æœ€å°å¹…ã‚’è¨­å®šã—ã¦æ¥µç«¯ã«ç‹­ããªã‚‹ã®ã‚’é˜²ã */
            aspect-ratio: 1000 / 618; /* â˜… é»„é‡‘æ¯”ã‚’é©ç”¨ */
        }
        .control-panel .panel-label {
            color: white;
            font-size: 14px;
            margin-bottom: 8px;
            font-weight: 500;
            text-align: center;
            width: 100%;
        }
        .control-panel .panel-buttons {
            display: flex;
            justify-content: center; /* ä¸­å¤®æƒãˆã«å¤‰æ›´ */
            gap: 8px; /* ãƒœã‚¿ãƒ³é–“ã®ã‚®ãƒ£ãƒƒãƒ—èª¿æ•´ */
            width: 100%;
        }

        /* æ“ä½œãƒœã‚¿ãƒ³ãƒ‘ãƒãƒ«å†…ã®ãƒœã‚¿ãƒ³ */
        #controlBox .panel-buttons button {
             /* åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ«ã¯ .control-button ã§æŒ‡å®š */
        }

        /* é€Ÿåº¦ãƒœã‚¿ãƒ³ */
        .speed-button {
            background: rgba(86, 101, 115, 0.6);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
             /* â˜… å…±é€šã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç¶™æ‰¿ */
             padding: 6px 12px;
             font-size: 12px;
             text-align: center;
             min-width: 60px;
             flex-grow: 1;
             flex-basis: 0;
        }

        .speed-button:hover {
            background: rgba(128, 140, 141, 0.7);
            transform: translateY(-1px);
        }

        .speed-button.active {
            background: linear-gradient(45deg, rgb(41, 128, 185), rgb(33, 97, 140));
            font-weight: 500;
            box-shadow: 0 0 10px rgba(41, 128, 185, 0.5);
        }

        /* é¸æŠä¸­ã‚«ãƒ†ã‚´ãƒªè¡¨ç¤º */
        .category-info {
            margin-top: 20px; /* ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã¨ã®ãƒãƒ¼ã‚¸ãƒ³ */
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
            font-size: 0.9rem;
        }

        /* â˜… æ³¨é‡ˆãƒ†ã‚­ã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .disclaimer-text {
            font-size: 0.75rem; /* å°ã•ã„ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º */
            color: rgba(255, 255, 255, 0.6); /* å°‘ã—è–„ã„è‰² */
            margin-top: 10px; /* ä¸Šã®è¦ç´ ã¨ã®é–“éš” */
            text-align: center;
            max-width: 600px; /* æœ€å¤§å¹…ã‚’æŒ‡å®š */
            margin-left: auto;
            margin-right: auto;
            line-height: 1.4; /* è¡Œé–“ */
        }

        /* ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹ãƒœã‚¿ãƒ³ */
        .back-button-container {
            margin-top: 20px;
            text-align: center;
        }
        .back-button {
            padding: 8px 20px;
            background: linear-gradient(45deg, rgba(52, 73, 94, 0.8), rgba(44, 62, 80, 0.8));
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º */
        }
         .back-button:hover {
             background: linear-gradient(45deg, rgba(72, 93, 114, 0.9), rgba(64, 82, 100, 0.9));
             transform: translateY(-1px);
             box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
         }


        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                min-height: 100vh;
                justify-content: flex-start;
            }

            h1 {
                font-size: 2rem;
                margin-top: 10px;
                margin-bottom: 0;
            }

            body > h2#mainSubtitle {
                font-size: 1.1rem;
                margin-bottom: 3px; /* â˜… èª¿æ•´ */
            }
            h3#nawlSubtitle {
                font-size: 0.9rem; /* â˜… èª¿æ•´ */
                margin-bottom: 8px; /* â˜… èª¿æ•´ */
            }

            .category-grid {
                grid-gap: 10px;
                margin-top: 10px;
                margin-bottom: 15px;
                /* grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); */ /* â˜… Tabletã§ã‚‚3åˆ—ç¶­æŒ */
            }
            .category-card {
                /* padding: 16px 8px; */ /* â˜… å¤‰æ›´å‰ */
                padding: 16px 8px; /* â˜… Tabletã§ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°èª¿æ•´ */
                border-radius: 10px;
            }
             .category-card h3 {
                 /* font-size: 0.9rem; */ /* â˜… å¤‰æ›´å‰ */
                 font-size: 0.9rem; /* â˜… Tabletã§ã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º (ãƒ™ãƒ¼ã‚¹ã¨åŒã˜) */
                 line-height: 1.2;
             }

             .card-counter {
                 margin-top: 8px;
                 margin-bottom: 8px;
                 font-size: 16px;
                 padding: 4px 12px;
             }

            .card-container {
                width: 90%;
                margin: 8px auto 15px auto;
            }

             .card-front, .card-back {
                 padding: 15px;
             }

             .pronunciation,
             .card-back p.definition-en {
                 font-size: 0.9rem;
                 margin-top: 3px; /* Tabletã§ã®ãƒãƒ¼ã‚¸ãƒ³èª¿æ•´ */
             }

             .card-back p.definition-jp {
                 font-size: 1.2rem;
             }
            .card h2 {
                font-size: 1.7rem;
            }


            p { /* ã‚«ãƒ¼ãƒ‰å†…ã®ãƒ†ã‚­ã‚¹ãƒˆã‚µã‚¤ã‚º (æ±ç”¨) */
                font-size: 15px;
            }

            .button {
                padding: 10px 20px;
                font-size: 15px;
            }
             .start-button {
                 margin-top: 15px;
             }

             .control-container {
                 gap: 10px;
                 margin-top: 10px;
             }
             .control-panel {
                 padding: 8px 12px;
                 min-width: 0; /* â˜… æœ€å°å¹…ãƒªã‚»ãƒƒãƒˆ (Tablet) */
             }
             .control-panel .panel-label { font-size: 13px; }


            .category-info {
                margin-top: 15px;
                font-size: 0.85rem;
            }
            .back-button-container { margin-top: 15px; }
            .back-button { font-size: 13px; padding: 7px 18px; }
        }

        @media (max-width: 480px) {
             body {
                padding: 8px;
            }

            h1 {
                font-size: 1.8rem;
                margin-top: 5px;
            }
             body > h2#mainSubtitle {
                font-size: 1rem;
                margin-bottom: 2px; /* â˜… èª¿æ•´ */
            }
             h3#nawlSubtitle {
                font-size: 0.8rem; /* â˜… èª¿æ•´ */
                margin-bottom: 5px; /* â˜… èª¿æ•´ */
            }

             .category-grid {
                grid-gap: 8px;
                margin-top: 8px;
                margin-bottom: 12px;
                width: 95%;
                grid-template-columns: repeat(2, max-content); /* â˜… ã‚¹ãƒãƒ›ã§ã¯2åˆ— max-content */
             }
            .category-card {
                /* padding: 20px 10px; */ /* â˜… å¤‰æ›´å‰ */
                padding: 20px 10px; /* â˜… ã‚¹ãƒãƒ›ã§ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°èª¿æ•´ */
                border-radius: 8px;
            }
             .category-card h3 {
                 /* font-size: 0.8rem; */ /* â˜… å¤‰æ›´å‰ */
                 font-size: 0.8rem; /* â˜… ã‚¹ãƒãƒ›ã§ã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºèª¿æ•´ */
                 line-height: 1.2;
             }

             .card-counter {
                 margin-top: 5px;
                 margin-bottom: 5px;
                 font-size: 14px;
                 padding: 4px 12px;
             }

            .card-container {
                width: 95%;
                margin: 5px auto 10px auto;
            }

             .card-front, .card-back {
                 padding: 10px;
             }
             .pronunciation,
             .card-back p.definition-en {
                 font-size: 0.85rem;
                  margin-top: 2px; /* Mobileã§ã®ãƒãƒ¼ã‚¸ãƒ³èª¿æ•´ */
             }

             .card-back p.definition-jp {
                 font-size: 1.1rem;
             }
            .card h2 {
                font-size: 1.5rem;
            }


            .button {
                padding: 8px 16px;
                font-size: 14px;
            }
             .start-button {
                 margin-top: 12px;
             }

             .control-container {
                 gap: 8px;
                 margin-top: 8px;
             }
             .control-panel {
                 padding: 6px 10px;
                 flex-basis: 100%; /* â˜… ã‚¹ãƒãƒ›ã§ã¯å„ãƒ‘ãƒãƒ«ã‚’1è¡Œã«ã™ã‚‹ */
                 aspect-ratio: auto; /* â˜… ã‚¹ãƒãƒ›ã§ã¯ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã‚’è§£é™¤ */
             }
              .control-panel .panel-label { font-size: 12px; margin-bottom: 5px; }
              #controlBox .panel-buttons { gap: 8px; }
              #speedControl .panel-buttons { gap: 5px; }


            .category-info {
                margin-top: 12px;
                font-size: 0.8rem;
            }
             /* â˜… ã‚¹ãƒãƒ›ã§ã®æ³¨é‡ˆãƒ†ã‚­ã‚¹ãƒˆèª¿æ•´ */
             .disclaimer-text {
                 font-size: 0.7rem;
                 margin-top: 8px;
             }
             .back-button-container { margin-top: 12px; }
             .back-button { font-size: 12px; padding: 6px 15px; }
        }
    </style>
</head>
<body>
    <div class="stars" id="starsContainer"></div>

    <h1><span>ğŸ¿ï¸</span> EIGOASOBI <span>ğŸŒ¸</span></h1>
    <h2 id="mainSubtitle">ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰</h2>
    <h3 id="nawlSubtitle">ã‚¢ã‚«ãƒ‡ãƒŸãƒƒã‚¯è‹±èªãƒ»å­¦è¡“è‹±å˜èª<br>New Academic Word List (NAWL) 957</h3> <div class="card-counter" id="cardCounter"></div>

    <div class="category-grid">
         <div class="category-card active" id="category-awl1">
            <h3>Rank 001 - 100</h3>
         </div>
         <div class="category-card category-disabled" id="category-awl2">
            <h3>Rank 101 - 200</h3>
            <p class="status-preparing">æº–å‚™ä¸­</p>
        </div>
        <div class="category-card category-disabled" id="category-awl3">
            <h3>Rank 201 - 300</h3>
            <p class="status-preparing">æº–å‚™ä¸­</p>
        </div>
         <div class="category-card category-disabled" id="category-awl4">
            <h3>Rank 301 - 400</h3>
            <p class="status-preparing">æº–å‚™ä¸­</p>
        </div>
         <div class="category-card category-disabled" id="category-awl5">
            <h3>Rank 401 - 500</h3>
            <p class="status-preparing">æº–å‚™ä¸­</p>
        </div>
         <div class="category-card category-disabled" id="category-awl6">
            <h3>Rank 501 - 600</h3>
            <p class="status-preparing">æº–å‚™ä¸­</p>
        </div>
        <div class="category-card category-disabled" id="category-awl7">
            <h3>Rank 601 - 700</h3>
            <p class="status-preparing">æº–å‚™ä¸­</p>
        </div>
        <div class="category-card category-disabled" id="category-awl8">
            <h3>Rank 701 - 800</h3>
            <p class="status-preparing">æº–å‚™ä¸­</p>
        </div>
        <div class="category-card category-disabled" id="category-awl9">
            <h3>Rank 801 - 900</h3>
            <p class="status-preparing">æº–å‚™ä¸­</p>
        </div>
        <div class="category-card category-disabled" id="category-awl10">
            <h3>Rank 901 - 957</h3>
            <p class="status-preparing">æº–å‚™ä¸­</p>
        </div>
    </div>

    <div class="card-container hidden" id="cardContainer">
        <div class="card" id="currentCard">
            <div class="card-front" id="cardFront">
                </div>
            <div class="card-back" id="cardBack">
                 </div>
        </div>
    </div>

    <div class="control-container">
        <div class="control-panel" id="controlBox">
            <div class="panel-label">ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</div>
            <div class="panel-buttons">
                 <button class="control-button pause-button" id="pauseButtonSmall">åœæ­¢</button>
                <button class="control-button prev-button" id="prevButtonSmall">æˆ»ã‚‹</button>
                <button class="control-button next-button" id="nextButtonSmall">æ¬¡ã¸</button>
            </div>
        </div>

        <div class="control-panel" id="speedControl">
            <div class="panel-label">è¡¨ç¤ºé€Ÿåº¦</div>
            <div class="panel-buttons">
                <button class="speed-button active" id="speed2s">ï¼’ç§’</button>
                <button class="speed-button" id="speed1s">ï¼‘ç§’</button>
                <button class="speed-button" id="speed0_5s">ï¼.ï¼•ç§’</button>
            </div>
        </div>
    </div>

    <button class="button start-button" id="startButton">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>

    <div class="category-info" id="categoryInfo">
         é¸æŠä¸­: <span id="selectedCategoryText">Rank 001 - 100</span> </div>
    <p class="disclaimer-text">Words and ranks are referenced from the official NAWL (New Academic Word List, Browne et al., 2013). All Japanese translations and English definitions in this list are original and written by the author.</p>

    <div class="back-button-container">
        <button class="back-button" id="backButton">ãƒˆãƒƒãƒ—ç”»é¢ã«æˆ»ã‚‹</button>
    </div>

    <script>
        // æ˜Ÿç©ºã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
        function createStars() {
            const starsContainer = document.getElementById('starsContainer');
            if (!starsContainer) return; // è¦ç´ ãƒã‚§ãƒƒã‚¯è¿½åŠ 
            const isMobile = window.innerWidth <= 768 || 'ontouchstart' in window;
            let starsCount;
            if (isMobile) {
                starsCount = window.innerWidth < 480 ? 50 : 80;
            } else {
                starsCount = 150;
            }
            starsContainer.innerHTML = '';
            for (let i = 0; i < starsCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                const size = isMobile ? Math.random() * 1.5 + 0.5 : Math.random() * 2 + 1;
                const left = Math.random() * 100;
                const top = Math.random() * 100;
                const duration = isMobile ? 3 + Math.random() * 5 : 4 + Math.random() * 8;
                const delay = Math.random() * 5;
                const opacity = 0.3 + Math.random() * 0.7;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${left}%`;
                star.style.top = `${top}%`;
                star.style.setProperty('--duration', `${duration}s`);
                star.style.setProperty('--opacity', opacity);
                star.style.animationDelay = `${delay}s`;
                starsContainer.appendChild(star);
            }
        }
        window.addEventListener('load', createStars);
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                 const starsContainer = document.getElementById('starsContainer');
                 if (starsContainer) {
                    starsContainer.innerHTML = '';
                    createStars();
                 }
            }, 250);
        });

        // ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ (ä»® - Rank 1-100 ã®ã¿ä½¿ç”¨)
        const cards = [
             { front: { word: "repertoire" }, back: { pronunciation: "ËˆrÉ›p.É™rËŒtwÉ‘r", definition_jp: "ã‚¹ã‚­ãƒ«ã‚„æŠ€èƒ½ã®é›†åˆ", definition_en: "ã‚¹ã‚­ãƒ«ã‚„æ¥­ç¸¾ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³" } },
             { front: { word: "obtain" }, back: { pronunciation: "É™bËˆteÉªn", definition_jp: "æ‰‹ã«å…¥ã‚Œã‚‹", definition_en: "å¾—ã‚‹" } },
             { front: { word: "distribution" }, back: { pronunciation: "ËŒdÉªs.trÉ™Ëˆbju.ÊƒÉ™n", definition_jp: "åˆ†å¸ƒ", definition_en: "ç‰©äº‹ãŒç‰¹å®šã®åœ°åŸŸã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã«åºƒãŒã£ã¦ã„ã‚‹æ–¹æ³•" } },
             { front: { word: "parameter" }, back: { pronunciation: "pÉ™ËˆrÃ¦m.Éª.tÉ™r", definition_jp: "ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿", definition_en: "ç‰¹æ€§ã‚„ä¸€å®šã®è¦ç´ ã€é™ç•Œ" } },
             { front: { word: "aspect" }, back: { pronunciation: "ËˆÃ¦s.pÉ›kt", definition_jp: "å´é¢", definition_en: "ç‰¹è³ªã€éƒ¨åˆ†ã€ã¾ãŸã¯è¦ç´ " } },
             { front: { word: "dynamic" }, back: { pronunciation: "daÉªËˆnÃ¦.mÉªk", definition_jp: "å‹•çš„ãª", definition_en: "å¸¸ã«æ´»å‹•ã—ã¦ã„ã‚‹ã€ã¾ãŸã¯å¤‰åŒ–ã—ã¦ã„ã‚‹ï¼›ç‰©ç†å­¦ã§ã¯ï¼šé‹å‹•ã«é–¢é€£ã™ã‚‹åŠ›" } },
             { front: { word: "impact" }, back: { pronunciation: "ËˆÉªm.pÃ¦kt", definition_jp: "å½±éŸ¿", definition_en: "è¡æ’ƒçš„ãªåŠ¹æœã‚„çµæœï¼ˆå‹•è©ï¼‰åŠ›å¼·ãæ‰“ã¤" } },
             { front: { word: "domain" }, back: { pronunciation: "doÊŠËˆmeÉªn", definition_jp: "é ˜åŸŸ", definition_en: "è¡Œå‹•ã€æ€è€ƒã€ã¾ãŸã¯å½±éŸ¿ã®åˆ†é‡ï¼›çŸ¥è­˜ã®é ˜åŸŸ" } },
             { front: { word:"publish" }, back: { pronunciation: "ËˆpÊŒb.lÉªÊƒ", definition_jp: "å‡ºç‰ˆã™ã‚‹", definition_en: "æœ¬ã€é›‘èªŒã€ã¾ãŸã¯ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§å°åˆ·ã™ã‚‹" } },
             { front: { word: "denote" }, back: { pronunciation: "dÉªËˆnoÊŠt", definition_jp: "ç¤ºã™", definition_en: "ä½•ã‹ã®åå‰ã‚„è¨˜å·ã«ãªã‚‹" } },
             // ... (ä»–ã® Rank 1-100 ã®å˜èªãƒ‡ãƒ¼ã‚¿) ...
             { front: { word: "essentially" }, back: { pronunciation: "ÉªËˆsÉ›nÊƒÉ™lÉª", definition_jp: "æœ¬è³ªçš„ã«", definition_en: "åŸºæœ¬çš„ã«ã€ä¸»ã«" } },
        ];
        // TODO: å°†æ¥çš„ã«ã‚«ãƒ†ã‚´ãƒªã”ã¨ã®ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å‡¦ç†ã‚’è¿½åŠ 

        // DOMè¦ç´ ã®å–å¾—
        const getElement = (id) => document.getElementById(id);
        const cardContainer = getElement('cardContainer');
        const currentCard = getElement('currentCard');
        const cardFront = getElement('cardFront');
        const cardBack = getElement('cardBack');
        const startButton = getElement('startButton');
        const cardCounter = getElement('cardCounter');
        const speedControl = getElement('speedControl');
        const speed2sButton = getElement('speed2s');
        const speed1sButton = getElement('speed1s');
        const speed0_5sButton = getElement('speed0_5s');
        const controlBox = getElement('controlBox');
        const prevButtonSmall = getElement('prevButtonSmall');
        const nextButtonSmall = getElement('nextButtonSmall');
        const pauseButtonSmall = getElement('pauseButtonSmall');
        const backButton = getElement('backButton');
        const categoryGrid = document.querySelector('.category-grid');
        const categoryInfo = getElement('categoryInfo');
        const selectedCategoryText = getElement('selectedCategoryText');
        const categoryCards = document.querySelectorAll('.category-card');
        const mainSubtitle = getElement('mainSubtitle');
        const nawlSubtitle = getElement('nawlSubtitle');
        const disclaimerText = document.querySelector('.disclaimer-text');

        // çŠ¶æ…‹å¤‰æ•°
        let currentCardIndex = 0;
        let autoFlipTimer = null;
        let autoNextTimer = null;
        let isPaused = false;
        let flipDelay = 2000;
        let autoAdvance = true;
        let currentRankInfo = '';

        // ã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤ºã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        function showCardFront(index) {
             if (!cards || index < 0 || index >= cards.length) return;
            const card = cards[index];
            if (!cardFront || !cardBack || !cardCounter || !currentCard) return;

            // â˜… HTMLæ§‹é€ ã‚’å¤‰æ›´ï¼šãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãƒ©ãƒƒãƒ‘ãƒ¼ã§å›²ã‚€
            cardFront.innerHTML = `
                <div class="main-content">
                    <h2>${card.front.word}</h2>
                </div>
                <span class="pronunciation">${card.back.pronunciation}</span>
            `;
            cardBack.innerHTML = `
                 <div class="main-content">
                    <p class="definition-jp">${card.back.definition_jp}</p>
                 </div>
                 <p class="definition-en">${card.back.definition_en}</p>
            `;

            // ã‚«ãƒ¼ãƒ‰ç•ªå·ã®æ›´æ–°
            cardCounter.innerHTML = `<span style="margin-right: 5px;">Rank</span><span id="rank-value-span" style="font-family: 'Roboto Mono', monospace; min-width: 40px; display: inline-block; text-align: right;">${(index + 1).toString().padStart(3, '0')}</span><span> / ${cards.length}</span>`;

            // ã‚«ãƒ¼ãƒ‰è£é¢ã‚’éè¡¨ç¤ºã«è¨­å®š
            if (cardBack) cardBack.style.display = 'none';

            // ã‚«ãƒ¼ãƒ‰ã‚’è¡¨é¢ã«æˆ»ã™
            currentCard.classList.remove('flipped');
            void currentCard.offsetHeight; // å¼·åˆ¶ãƒªãƒ•ãƒ­ãƒ¼

            // ä¸€æ™‚åœæ­¢çŠ¶æ…‹ã«å¿œã˜ã¦ã‚¯ãƒªãƒƒã‚¯å¯èƒ½ã‚¯ãƒ©ã‚¹ã‚’åˆ¶å¾¡
             if (currentCard) {
                 currentCard.classList.toggle('clickable', isPaused);
             }

            // è‡ªå‹•é€²è¡Œã‚¿ã‚¤ãƒãƒ¼ã®è¨­å®š
            if (autoAdvance && !isPaused) {
                clearTimeout(autoFlipTimer);
                clearTimeout(autoNextTimer);
                autoFlipTimer = setTimeout(() => {
                    if (!isPaused && currentCard && cardBack) {
                        cardBack.style.display = 'flex'; // è£é¢ã‚’è¡¨ç¤º
                        currentCard.classList.add('flipped'); // å›è»¢
                        autoNextTimer = setTimeout(nextCard, flipDelay); // æ¬¡ã®ã‚«ãƒ¼ãƒ‰ã¸
                    }
                }, flipDelay);
            }
        }

        // æ¬¡ã®ã‚«ãƒ¼ãƒ‰ã¸
        function nextCard() {
            clearTimeout(autoFlipTimer);
            clearTimeout(autoNextTimer);
            currentCardIndex = (currentCardIndex + 1) % cards.length;
            showCardFront(currentCardIndex);
        }

        // å‰ã®ã‚«ãƒ¼ãƒ‰ã¸
        function prevCard() {
            isPaused = true;
            if (pauseButtonSmall) {
                pauseButtonSmall.textContent = 'å†ç”Ÿ';
                pauseButtonSmall.classList.add('resume');
            }
            if (currentCard) currentCard.classList.add('clickable');
            clearTimeout(autoFlipTimer);
            clearTimeout(autoNextTimer);
            currentCardIndex--;
            if (currentCardIndex < 0) {
                currentCardIndex = cards.length - 1;
            }
            showCardFront(currentCardIndex);
        }

        // è¡¨ç¤ºé€Ÿåº¦ã®è¨­å®š
        function setSpeed(seconds) {
            flipDelay = seconds * 1000;
            [speed2sButton, speed1sButton, speed0_5sButton].forEach(btn => {
                if(btn) btn.classList.remove('active');
            });
            let activeButton;
            if (seconds === 2) activeButton = speed2sButton;
            else if (seconds === 1) activeButton = speed1sButton;
            else if (seconds === 0.5) activeButton = speed0_5sButton;
            if(activeButton) activeButton.classList.add('active');
            if (!isPaused) {
                clearTimeout(autoFlipTimer);
                clearTimeout(autoNextTimer);
                showCardFront(currentCardIndex);
            }
        }

        // UIè¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆé–¢æ•°
        function showFlashcardView(show) {
             const displayGrid = show ? 'none' : 'grid';
             const displayApp = show ? 'block' : 'none';
             const displayFlexApp = show ? 'flex' : 'none';
             const displayDisclaimer = show ? 'none' : 'block'; // â˜… æ³¨é‡ˆã®è¡¨ç¤ºçŠ¶æ…‹

             if (categoryGrid) categoryGrid.style.display = displayGrid;
             if (categoryInfo) categoryInfo.style.display = show ? 'none' : 'block';
             if (startButton) startButton.classList.toggle('hidden', show);

             if (cardContainer) cardContainer.classList.toggle('hidden', !show);
             if (cardCounter) cardCounter.style.display = show ? 'inline-block' : 'none';
             if (controlBox) controlBox.style.display = displayFlexApp;
             if (speedControl) speedControl.style.display = displayFlexApp;
             if (backButton) backButton.style.display = show ? 'inline-block' : 'none';

             // â˜… æ³¨é‡ˆãƒ†ã‚­ã‚¹ãƒˆã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆ
             if (disclaimerText) disclaimerText.style.display = displayDisclaimer;

             if (mainSubtitle && nawlSubtitle) {
                 if (show) {
                     // â˜… ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰ç”»é¢ã®ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ã‚‚å¤‰æ›´ (innerHTMLã‚’ã‚³ãƒ”ãƒ¼)
                     // mainSubtitle.textContent = nawlSubtitle.textContent; // â˜… å¤‰æ›´å‰
                     mainSubtitle.innerHTML = nawlSubtitle.innerHTML; // â˜… å¤‰æ›´å¾Œ (æ”¹è¡Œã‚’ç¶­æŒ)
                     nawlSubtitle.style.display = 'none';
                 } else {
                     mainSubtitle.textContent = 'ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰'; // ãƒˆãƒƒãƒ—ç”»é¢ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
                     nawlSubtitle.style.display = 'block';
                 }
             }
        }

        // é¸æŠä¸­ã‚«ãƒ†ã‚´ãƒªæƒ…å ±ã®è¨­å®š
        function setActiveCategoryInfo() {
            const activeCard = document.querySelector('.category-card.active');
            if (activeCard) {
                currentRankInfo = activeCard.querySelector('h3')?.textContent || '';
                 // â˜… åˆæœŸé¸æŠã‚«ãƒ†ã‚´ãƒªè¡¨ç¤ºã‚‚ 0 åŸ‹ã‚ã‚’åæ˜ 
                if (currentRankInfo === 'Rank 1 - 100') {
                    currentRankInfo = 'Rank 001 - 100';
                }
                if(selectedCategoryText) selectedCategoryText.textContent = currentRankInfo;
            }
        }
        setActiveCategoryInfo(); // åˆæœŸèª­ã¿è¾¼ã¿

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        if (startButton) {
            startButton.addEventListener('click', () => {
                const activeCard = document.querySelector('.category-card.active'); // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚«ãƒ¼ãƒ‰ã‚’å–å¾—

                // â˜… æº–å‚™ä¸­ã®ã‚«ãƒ†ã‚´ãƒªãŒé¸æŠã•ã‚Œã¦ã„ãŸã‚‰å‡¦ç†ã‚’ä¸­æ–­
                if (activeCard && activeCard.classList.contains('category-disabled')) {
                     // alert("ã“ã®ã‚«ãƒ†ã‚´ãƒªã¯ç¾åœ¨æº–å‚™ä¸­ã§ã™ã€‚"); // å¿…è¦ã§ã‚ã‚Œã°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
                     return; // ã“ã“ã§å‡¦ç†ã‚’çµ‚äº†
                }

                // --- æº–å‚™ä¸­ã‚«ãƒ†ã‚´ãƒªã§ãªã‘ã‚Œã°ã€æ—¢å­˜ã®å‡¦ç†ã‚’å®Ÿè¡Œ ---
                setActiveCategoryInfo();
                showFlashcardView(true); // ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
                currentCardIndex = 0;
                isPaused = false;
                if (pauseButtonSmall) {
                    pauseButtonSmall.textContent = 'åœæ­¢';
                    pauseButtonSmall.classList.remove('resume');
                }
                setSpeed(flipDelay / 1000);
                showCardFront(currentCardIndex);
                if (currentCard) {
                    currentCard.removeEventListener('click', handleCardClick);
                    currentCard.addEventListener('click', handleCardClick);
                }
            });
        }
        if (backButton) {
            backButton.addEventListener('click', () => {
                showFlashcardView(false); // ã‚«ãƒ†ã‚´ãƒªé¸æŠè¡¨ç¤º
                clearTimeout(autoFlipTimer);
                clearTimeout(autoNextTimer);
                isPaused = true;
                if (currentCard) {
                    currentCard.removeEventListener('click', handleCardClick);
                }
            });
        }
        function handleCardClick() { // æ‰‹å‹•ãƒ•ãƒªãƒƒãƒ—
            if (isPaused && currentCard && cardBack) {
                if (currentCard.classList.contains('flipped')) {
                    currentCard.classList.remove('flipped');
                    setTimeout(() => {
                         if (cardBack) cardBack.style.display = 'none';
                    }, 500); // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¾Œã«éè¡¨ç¤º
                } else {
                    cardBack.style.display = 'flex'; // è¡¨ç¤ºã—ã¦ã‹ã‚‰å›è»¢
                    currentCard.classList.add('flipped');
                }
            }
        }
        if (prevButtonSmall) prevButtonSmall.addEventListener('click', prevCard);
        if (nextButtonSmall) {
            nextButtonSmall.addEventListener('click', () => {
                 isPaused = true;
                 if (pauseButtonSmall) {
                     pauseButtonSmall.textContent = 'å†ç”Ÿ';
                     pauseButtonSmall.classList.add('resume');
                 }
                 if (currentCard) currentCard.classList.add('clickable');
                 clearTimeout(autoFlipTimer);
                 clearTimeout(autoNextTimer);
                 nextCard();
            });
        }
        if (pauseButtonSmall) {
            pauseButtonSmall.addEventListener('click', () => {
                isPaused = !isPaused;
                if (isPaused) {
                    clearTimeout(autoFlipTimer);
                    clearTimeout(autoNextTimer);
                    pauseButtonSmall.textContent = 'å†ç”Ÿ';
                    pauseButtonSmall.classList.add('resume');
                    if (currentCard) currentCard.classList.add('clickable');
                } else {
                    pauseButtonSmall.textContent = 'åœæ­¢';
                    pauseButtonSmall.classList.remove('resume');
                    if (currentCard) currentCard.classList.remove('clickable');
                    if (currentCard && currentCard.classList.contains('flipped')) {
                         autoNextTimer = setTimeout(nextCard, flipDelay);
                    } else {
                         showCardFront(currentCardIndex); // ã‚¿ã‚¤ãƒãƒ¼å†é–‹
                    }
                }
            });
        }
        if (speed2sButton) speed2sButton.addEventListener('click', () => setSpeed(2));
        if (speed1sButton) speed1sButton.addEventListener('click', () => setSpeed(1));
        if (speed0_5sButton) speed0_5sButton.addEventListener('click', () => setSpeed(0.5));
        categoryCards.forEach(card => {
             if (!card) return;
            card.addEventListener('click', () => {
                // â˜… ç„¡åŠ¹ãªã‚«ãƒ†ã‚´ãƒªã¯ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã—ãªã„ï¼ˆè¦‹ãŸç›®ä¸Šã¯å¤‰ã‚ã‚‹ãŒã€JSå†…éƒ¨ã§ã®åˆ¤å®šç”¨ï¼‰
                // if (card.classList.contains('category-disabled')) {
                //     return; // ç„¡åŠ¹ãªã‚‰ä½•ã‚‚ã—ãªã„ï¼ˆã¾ãŸã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼‰
                // }

                // ä¸€æ—¦ã™ã¹ã¦ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
                categoryCards.forEach(c => { if(c) c.classList.remove('active'); });
                // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
                 card.classList.add('active');
                 // é¸æŠä¸­ã‚«ãƒ†ã‚´ãƒªæƒ…å ±ã‚’æ›´æ–°
                 setActiveCategoryInfo();
                 // TODO: ã‚«ãƒ†ã‚´ãƒªã«å¿œã˜ãŸãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å‡¦ç†
            });
        });
         let cardResizeTimer; // ãƒªã‚µã‚¤ã‚ºæ™‚ã®å†æç”»
         window.addEventListener('resize', () => {
             if (cardContainer && !cardContainer.classList.contains('hidden')) {
                 clearTimeout(cardResizeTimer);
                 cardResizeTimer = setTimeout(() => {
                     showCardFront(currentCardIndex);
                     if (currentCard && currentCard.classList.contains('flipped')) {
                         currentCard.classList.remove('flipped');
                         void currentCard.offsetHeight;
                         cardBack.style.display = 'flex';
                         currentCard.classList.add('flipped');
                     } else if (cardBack) {
                         cardBack.style.display = 'none';
                     }
                 }, 250);
             }
         });
    </script>
</body>
</html>

